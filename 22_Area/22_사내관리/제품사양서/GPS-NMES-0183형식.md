---
share_link: https://share.note.sx/3mnqh275#7BxhoarEoFdGfAbDI9a4RUNS53mgB7BEWuNsyApWjf0
share_updated: 2025-02-10T16:54:11+09:00
---
# NMEA 0183 메시지 형식 및 필드별 설명

## 1. NMEA 메시지 개요
NMEA 0183 프로토콜에서 **GPS 수신기가 전송하는 메시지**는 특정 형식에 따라 구성됩니다.  
각 메시지는 **`$Talker ID+메시지 유형`** 형태로 시작하며, 여러 개의 데이터 필드를 포함합니다.

### Talker ID (데이터 송신 장치)
- `GP` : GPS
- `GL` : GLONASS
- `GA` : Galileo
- `GB` / `BD` : BeiDou
- `GQ` : QZSS
- `GN` : 다중 GNSS 조합 (GPS + 기타 위성)

## 2. NMEA 메시지 형식 및 필드별 설명

### 1) `$GPGGA` (GPS 위치 고정 정보)
- **설명** : GPS 위치 데이터 및 고도 정보를 포함
- **예제 메시지** :  
  `$GPGGA,123519,4807.038,N,01131.000,E,1,08,0.9,545.4,M,46.9,M,,*47`

| **필드 번호** | **데이터 내용** | **예제 값** |
|------------|-------------------------|-----------|
| 1 | UTC 시간 (hhmmss) | 123519 |
| 2 | 위도 (ddmm.mmm) | 4807.038 |
| 3 | 위도 방향 (N/S) | N |
| 4 | 경도 (dddmm.mmm) | 01131.000 |
| 5 | 경도 방향 (E/W) | E |
| 6 | 위치 고정 상태 (0=No Fix, 1=GPS Fix) | 1 |
| 7 | 사용 가능한 위성 수 | 08 |
| 8 | 수평 정확도 (HDOP) | 0.9 |
| 9 | 고도 (m) | 545.4 |
| 10 | 높이 단위 (M=미터) | M |
| 11 | 지구 타원체 고도 | 46.9 |
| 12 | 체크섬 | *47 |


### 2) `$GPGLL` (위치 정보 - 위도/경도)
- **설명** : 위치 데이터(위도, 경도), 위치 고정 시간 및 상태 포함
- **예제 메시지** :  
  `$GPGLL,4916.45,N,12311.12,W,225444,A,*1D`

| **필드 번호** | **데이터 내용** | **예제 값** |
|------------|-------------------------|-----------|
| 1 | 위도 (ddmm.mmm) | 4916.45 |
| 2 | 위도 방향 (N/S) | N |
| 3 | 경도 (dddmm.mmm) | 12311.12 |
| 4 | 경도 방향 (E/W) | W |
| 5 | UTC 시간 (hhmmss) | 225444 |
| 6 | 상태 (A=Valid, V=Invalid) | A |
| 7 | 체크섬 | *1D |



### 3) `$GPGSA` (GNSS 정확도 및 활성 위성 정보)
- **설명** : DOP(정확도) 및 사용 중인 위성 목록 제공
- **예제 메시지** :  
  `$GPGSA,A,3,04,05,,09,12,,,24,,,,2.5,1.3,2.1*39`

| **필드 번호** | **데이터 내용** | **예제 값** |
|------------|-------------------------|-----------|
| 1 | 모드 (A=자동, M=수동) | A |
| 2 | 위치 고정 상태 (1=No Fix, 2=2D Fix, 3=3D Fix) | 3 |
| 3~14 | 사용된 위성 PRN 번호 | 04, 05, 09, 12, 24 |
| 15 | 위치 정확도 (PDOP) | 2.5 |
| 16 | 수평 정확도 (HDOP) | 1.3 |
| 17 | 수직 정확도 (VDOP) | 2.1 |
| 18 | 체크섬 | *39 |



### 4) `$GPGSV` (가시 위성 정보)
- **설명** : 가시 위성의 수, PRN 번호, 고도, 방위각, 신호 대 잡음비(SNR) 정보 제공
- **예제 메시지** :  
  `$GPGSV,3,1,12,07,45,147,42,08,27,225,40,10,58,245,44,13,12,057,39*79`

| **필드 번호** | **데이터 내용** | **예제 값** |
|------------|-------------------------|-----------|
| 1 | 총 메시지 개수 | 3 |
| 2 | 현재 메시지 번호 | 1 |
| 3 | 가시 위성 수 | 12 |
| 4~7 | 위성 1 정보 (PRN 번호, 고도, 방위각, SNR) | 07, 45, 147, 42 |
| 8~11 | 위성 2 정보 | 08, 27, 225, 40 |



### 5) `$GPRMC` (추천 최소 데이터 - 위치, 속도, 시간 정보)
- **설명** : 기본적인 GPS 정보 (위치, 속도, 날짜, 시간 등) 제공
- **예제 메시지** :  
  `$GPRMC,235947,A,3723.4659,N,12158.9324,W,0.02,0.0,200804,,,A*68`

| **필드 번호** | **데이터 내용** | **예제 값** |
|------------|-------------------------|-----------|
| 1 | UTC 시간 (hhmmss) | 235947 |
| 2 | 상태 (A=Valid, V=Invalid) | A |
| 3 | 위도 (ddmm.mmmm) | 3723.4659 |
| 4 | 위도 방향 (N/S) | N |
| 5 | 경도 (dddmm.mmmm) | 12158.9324 |
| 6 | 경도 방향 (E/W) | W |
| 7 | 속도 (노트 단위) | 0.02 |
| 8 | 진행 방향 (True Course) | 0.0 |
| 9 | UTC 날짜 (DDMMYY) | 200804 |
| 10 | 체크섬 | *68 |

### 6) `$GPVTG` (지면 방향 및 지상 속도)
- **설명** : 이동 방향 및 지상 속도 제공
- **예제 메시지** :  
  `$GPVTG,054.7,T,034.4,M,005.5,N,010.2,K,A*23`

| **필드 번호** | **데이터 내용** | **예제 값** |
|------------|-------------------------|-----------|
| 1 | 실제 지면 방향 (True Track Degrees) | 054.7 |
| 2 | 참조 문자 (T=true) | T |
| 3 | 자기 지면 방향 (Magnetic Track Degrees) | 034.4 |
| 4 | 참조 문자 (M=Magnetic) | M |
| 5 | 속도 (노트 단위) | 005.5 |
| 6 | 단위 (N=노트) | N |
| 7 | 속도 (km/h 단위) | 010.2 |
| 8 | 단위 (K=km/h) | K |
| 9 | 체크섬 | *23 |


### 7) 기타 메시지 (예: `$GPZDA`, `$GPGNS`)
- **설명** : UTC 날짜 및 시간 정보, 위치 및 정확도 정보 등 기타 데이터 제공
- **예제 메시지** :  
  `$GPZDA,201530.00,04,07,2023,00,00*60`

| **필드 번호** | **데이터 내용** | **예제 값** |
|------------|-------------------------|-----------|
| 1 | UTC 시간 (hhmmss.ss) | 201530.00 |
| 2 | 일 (DD) | 04 |
| 3 | 월 (MM) | 07 |
| 4 | 연도 (YYYY) | 2023 |
| 5 | 로컬 시간 오프셋 (시간) | 00 |
| 6 | 로컬 시간 오프셋 (분) | 00 |
| 7 | 체크섬 | *60 |


---
---

# **RX 핀을 통한 데이터 전송 가능 유형 (GPS 모듈)**

## 1. 설정(Configuration) 명령어

호스트가 GPS 모듈의 동작 방식을 변경하기 위해 보내는 NMEA‐형식의 설정 명령어들입니다.

- **PMTK 기본 명령** (MediaTek)
    - **PMTK220**: 위치 데이터 출력 주기 설정
        ```text
        $PMTK220,1000*1F<CR><LF>
        ```
        → 1000 ms(1 Hz) 간격으로 NMEA 문장 출력
    - **PMTK300**: Fix(측위) 주기 제어 (DGPS 모드 포함)
        ```text
        $PMTK300,1000,0,0,0,0*1C<CR><LF>
        ```
        → 1000 ms 단위로 위치 고정 시도
    - **PMTK314**: 출력할 NMEA 문장 종류 및 빈도 설정 (총 19개 필드)
        ```text
        $PMTK314,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0*29<CR><LF>
        ```
        → `$GPRMC` 문장만 1 Hz 출력, 나머지 비활성
    - **PMTK251**: UART 통신 속도 변경
        ```text
        $PMTK251,38400*27<CR><LF>
        ```
        → 보드레이트 38400 bps로 변경
    - **PMTK161 / PMTK225**: 절전 모드 진입/복귀
        ```text
        $PMTK161,0*28<CR><LF>   // Sleep 모드 진입  
        $PMTK225,0*2B<CR><LF>   // Normal 모드 복귀 
        ```

---

## 2. DGPS 보정(RTCM) 데이터

GPS 모듈의 측위 정확도를 높이기 위해 **RTCM v2.x/v3.x** 형식의 DGPS 보정 데이터를 RX로 입력할 수 있습니다.

- **RTCM v2.x/v3.x**: 지상 DGPS 기지국에서 송출하는 표준 포맷
- GPS 모듈은 RTCM 데이터를 수신하여 **SBAS/DGPS 보정**을 내부적으로 수행
- 예시 (바이너리 스트림):
    
    ```hex
    <RTCM v3.2 header><Message 1005><…>  
    → RX 핀으로 연속 전송  
    ```
    
- MediaTek API에는 `mtk_gps_rtcm_input(buffer, length)` 함수로 처리합니다
    

---

## 3. A‑GNSS 보조 데이터 (Assistance Data / SBAS)

장시간 Cold Start나 저신호 환경에서 빠른 초기 고감을 위해 **A‑GPS 보조 데이터**를 전송할 수 있습니다.

1. **SBAS 위성 정보**
    
    - WAAS, EGNOS, MSAS 같은 SBAS 궤도·시각·보정 데이터
        
    - 일반 NMEA `GPGSV`를 통해 SBAS 위성 목록을 수신하지만,
        
    - PMTK301 명령으로 SBAS 수신 모드 설정 가능
        
        ```text
        $PMTK301,2*2D<CR><LF>  // SBAS(2) 활성화 
        ```
        
2. **AssistNow Offline/Online (u‑blox)**
    
    - u‑blox의 **UBX‑AID‑INI**, **UBX‑AID‑EPH**, **UBX‑AID‑ALM** 명령으로  
        _초기 위치, 궤도 요소, 시각_ 데이터를 주입하여 Cold Start 시간을 단축
        

---

## 4. 시간 동기화 수동 주입 (GPZDA)

내부 RTC 보정이나 로그 타임스탬프 정확화를 위해 **GPZDA** 문장으로 UTC 시간 정보를 보낼 수 있습니다.

```text
$GPZDA,153045.00,18,04,2025,00,00*63<CR><LF>
```

- 포맷: `$GPZDA,hhmmss.ss,DD,MM,YYYY,LL,MM*CS`
    
- 예: 2025‑04‑18 15:30:45 UTC로 설정
    
- 모듈은 이 시간을 내부 시계에 반영하여, NMEA 출력 시 정확한 시간 정보를 제공합니다.
    



