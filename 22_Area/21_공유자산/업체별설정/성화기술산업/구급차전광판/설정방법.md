## 성화기술산업 구급차 전광판 설정방법
#### 컨트롤러 세팅
- 컨트롤박스 -- (RS232) DB502S+DB300WB (HUB75-1) -- LED모듈(2단4열 x 2개)
- 모듈 정보
	- 기존 모듈 P4 2단 4열 2개 (08D-P32D1S32)
	- 신규 제작시 성화 접이식 모듈
- 전광판컨트롤러 정보
	- DB502S V13 (펌웨어 V3.2.5)
	- DB300WB V06 (펌웨어 V2.0.5)
- DB502S V13 세팅
	1. 펌웨어 업그레이드: `DIBD502S_08C_02R020C_V3.2.5-20250602.bin`
	2. 폰트 전송
		- 폰트그룹1
			- 영어: `ENG 08x16-DABIT(표준).fnt`
			- 한글조합형: `KOR 16x16-DABIT(표준).fnt`
			- 사용자폰트: `USER 16x16-Special(표준).fnt`
	3. 화면설정
		- 세로: `2`
		- 가로: `8`
		- 픽셀당 비트수: `3BPP(8Color)`
		- 모듈배열방법: `가로형`
	4. 표출신호 설정: `08D-P32D1S32`
	5. 페이지개수 등록: `2`

%% 
다빛솔루션
- 부트로더에서 펌웨어, 폰트전송
- 자동전송목록(.pla, .bgp 파일 업체 제공시)
	- 다빛채1
		- .bgp
		- Firmware Upgrade(부트로더에서 하면 생략)
		- DIBD Screen Size
		- DIBD Display Type
		- Schedule & Image
		- 페이지문구 페이지 개수 등록
		- 페이지문구 전체전송
		- 페이지문구01-01, 페이지문구02-01 표출확인
	- 다빛채2: .pla, Schedule & Image
		- 블랙화면 확인
- DBPS
	- 페이지메시지 > 1 > 전송
	- 페이지메시지 > 2 > 전송
- SerialPortMon
	- 문구확인
- 다빛채 어플에서 확인해야 하는지?
%%

#### 컨트롤러에 배경이미지 업로드 (다빛채)
- 표출문구 1~9번의 dat파일 생성 (참고: DABITDOCS 3.3. 배경이미지 제작 및 표출)
- 표시목록
	- 1~9번 만들어 놓은 dat파일 등록
		- 1~5, 8, 9번
			- 메인화면효과: `이동하기`
			- 효과방향: `왼쪽`
			- 효과속도 및 유지시간은 테스트해보고 알맞게 세팅
		- 6~7번
			- 메인화면효과: `색상깜빡이기`
			- 효과방향: `빨강`
			- 효과속도 및 유지시간은 테스트해보고 알맞게 세팅
	- 10번 검은화면 등록
	- 11~12번 페이지문구 선택
	- 저장(파일형식: .bgp) > 업로드
	- ![[성화_구급차_다빛채.png|500]]

#### 컨트롤러에 초기화면 검은색 업로드 (다빛채)
- 표시목록 1번 검은화면 등록
- 저장(파일형식: .pla) > 업로드
- ![[성화_구급차_다빛채2.png|500]]

#### BLE 통신을 통해 컨트롤러에 사용자 지정문구(11~12번) 등록
1. 다빛채 어플 이용
	- 컨트롤러 연결: DABITDOCS 2.1.5. BLE(Bluetooth Low Energy) 통신 설정
	- 11번 등록
		- 1페이지, 큰글자
		- 문구입력
		- 표시색상, 효과, 효과속도, 유지시간 선택
		- 전송
	- 12번 등록
		- 2페이지, 큰글자
		- 문구입력
		- 표시색상, 효과, 효과속도, 유지시간 선택
		- 전송
2. 자체 프로그램 이용 
	- 다빛솔루션의 ASCII 프로토콜 문서를 참고
	- 11번 등록: ![001/P0000/.......!]
	- 12번 등록: ![001/P0100/.......!]

#### 표출확인
- 컨트롤박스에서 1번부터 12번까지 눌러서 등록한 문구가 나오는지 확인
- BLE 통신을 이용해 11번과 12번 문구를 바꿔서 나오는지 확인

#### (참고) 프로토콜 패킷

1. **양보해 주셔서 감사합니다. (흰색, 이동하기 왼쪽)**
    ```
    02 03 52 00 30 58 03 02 03 52 00 31 5F 03
    ```
2. **사고 수습 중 입니다. 우회하세요. →→→ (흰색, 이동하기 왼쪽)**
    ```
    02 03 52 00 30 58 03 02 03 52 00 32 56 03
    ```
3. **←←← 사고 수습 중 입니다. 우회하세요. (흰색, 이동하기 왼쪽)**
    ```
    02 03 52 00 30 58 03 02 03 52 00 33 51 03
    ```
4. **응급 출동 중 입니다. (흰색, 이동하기 왼쪽)**
    ```
    02 03 52 00 30 58 03 02 03 52 00 34 44 03
    ```
5. **급정거에 주의하세요. (흰색, 이동하기 왼쪽)**
    ```
    02 03 52 00 30 58 03 02 03 52 00 35 43 03
    ```
6. **(적색 전체 점멸)**
    ```
    02 03 52 00 30 58 03 02 03 52 00 36 4A 03
    ```
7. **전방 ! 주의 (적색, 점멸)**
    ```
    02 03 52 00 30 58 03 02 03 52 00 37 4D 03
    ```
8. **<<< <<< <<< <<< (적색, 닦아내기 왼쪽)**
    ```
    02 03 52 00 30 58 03 02 03 52 00 38 60 03
    ```
9. **>>> >>> >>> >>> (적색, 닦아내기 오른쪽)**
    ```
    02 03 52 00 30 58 03 02 03 52 00 39 67 03
    ```
10. **없음**

11. **사용자지정**
    ```
    02 03 52 00 31 5F 03 02 03 52 00 31 5F 03
    ```
12. **사용자지정**
    ```
    02 03 52 00 31 5F 03 02 03 52 00 32 56 03

