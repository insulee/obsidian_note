#### 프로그램 위치
D:\Staff\20. 브랜드마케팅팀\베어로보틱스\DB502V06

#### DB300E(ESP32) Binary File Update
#### Flash Download 위치

> [!note] 펌웨어
> Bootloader 펌웨어: DB300-BOOT V4.57.bin
> 
> User 펌웨어: DB300_ETH_V4.61.bin
- DB300E를 JP1 단락 후 TTL로 전원공급
- flash_download_tool_3.9.6-DB502_V6 > flash_download_tool_3.9.6.exe 
	- ChipType: `ESP32`
	- WorkMode: `Develop`
	- LoadMode: `UART`
	- `OK`
		- ![[베어_300_esp32.png]]
	- DB300-BOOT V4.57.bin @0x00000  
	- DB300_ETH_V4.61.bin @0x10000
	- `START`
		- ![[베어_300_esp32_v6.png|350]]


#### DB300E Mac Address 암호입력
- DabitChe_V2.2.0_BearRobotics_mac > DabitChe.exe
- DB300E를 TTL로 연결
- DB300E 4.61 버전 이하는 제조공장에서 지정한 Mac Address를 사용(1.0 버전 이후로는 자체 Mac Address 사용 가능)
- DB300E의 정상동작을 위해서는 `54 : FF : 82 : 80 : ** : **` 형태의 암호를 DB300E에 전송
- **(중요) 납품할 때 동일한 암호를 여러 DB300에 입력해도 무방, 입력한 암호는 반드시 기재**
- 입력과정
	- 다빛채 > `메뉴모음` > 메뉴모음 창 > `통신설정` > Serial 통신 > `포트열기` > `컨트롤러 연결`
	- F10 > `MacAddress 설정` > `DB300` `54:FF:82:80:11:26` > 전송 > 읽기 로 전송 확인
		- `11:26 `부분은 임의로 변경 가능
		- ![[베어_300_macaddress_v6.png]]
- 1.0 버전 이후는 자체 Mac Address를 출력해 이를 DB300E 뒷면에 붙이고, 위의 과정을 통해 Mac Address를 변경하여 관리
#### DB300E 초기값 설정
- DB300E를 LAN으로 연결
- dbPS_v1.4.5 > dbPS.exe
- dbPS > 설정 > 통신설정 > dbNet > `Search` > DB300E의 Mac Address 선택
- `Load Default IP`를 눌러 아래의 항목이 적용됐는지 확인
	- Name: DB300
	- IP Address: 10.10.127.10
	- SubnetMask: 255.255.255.0
	- Gateway: 10.10.127.1
	- IP Port: 5000
		- ![[베어_300_dbps.png|400]]
	- `Set`
	- `Search` > 정상적으로 변경됐는지 확인 
#### DB300E Mac Address 출력 및 부착
- DABITNet IP 세팅시 나오는 Mac Address를 출력
- DB300E에 부착
---


#### DB502S(ESP32-S3) Binary File Update
> [!note] 펌웨어
> Bootloader 펌웨어: DB502-BOOT V8.95.bin
> User 펌웨어: DB502S_08C_02R016C_V9.16.bin
> Font File: DB502S_PV6_Stroage_F0_Utf16_Gulrim_F1_Johab_V0.bin
 
- DB502를 JP1 단락 후 TTL로 전원공급
- JP3를 5V(LAN)로 단락했는지 확인
- flash_download_tool_3.9.6-DB502_V6 > flash_download_tool_3.9.6.exe 
	- ChipType: `ESP32-S3`
	- WorkMode: `Develop`
	- LoadMode: `UART`
	- `OK`
		- ![[베어_300_esp32s3.png]]
	- DB502-BOOT V8.95.bin @ 0x000000
	- DB502S_08C_02R016C_V9.16.bin @ 0x010000
	- DB502S_PV6_Stroage_F0_Utf16_Gulrim_F1_Johab_V0.bin @ 0x110000
	- `START`
		- ![[베어_300_esp32s3_v6.png|350]]

#### DB502S Mac Address 설정 및 정상표출 확인
1. Mac Address 설정
	- DabitChe_V2.2.0_BearRobotics_mac > DabitChe.exe 실행
	- DB502S를 TTL로 연결
		- 메뉴모음 > F10 > `MacAddress 설정` > `DB502` `54:FF:82:40:00:00` > 전송 > 읽기 로 전송 확인
		- ![[베어_502.png]]
2. DB502S 정상 표출 확인
	- 다빛채 > `메뉴모음` > 메뉴모음 창 > `자동전송`
	- **긴급문구 전송만 체크**
		- ![[베어_502_2.png|500]]
	- DB502S가 정상 표출되는지 확인
		- P3 2단6열로 봤을 때 아래의 내용이 번갈아 가며 나오면 정상
			- 你好バンガワ
			- 你好バンガワ
			-  다빛솔루션
			-  다빛솔루션
		- 베어로보틱스 모듈로 아래의 내용이 번갈아 가며 나오면 정상
			- 你好バンガワ 你好バンガワ 你好バンガワ
			- 다빛솔루션 다빛솔루션 다빛솔루션
---

#### PC 네트워크 환경 설정
- 윈도우 검색창에 `네트워크 연결 보기`를 눌러 네트워크 연결 폴더 열기
- 이더넷 아이콘을 선택해 우측버튼 클릭 후 속성
	- ![[베어_ip1.png]]
- 인터넷 프로토콜 버전 4 (TCP/IPv4) > 속성
	- 다음 IP 주소 사용
		- IP 주소: `10.10.127.1`
		- 서브넷 마스크: `255.255.255.0
			- ![[베어_ip2.png|300]]
			- ![[베어_ip3.png|300]]
---


#### DB502S+DB300E 설정 및 표출 확인
>[! important] DB502S와 DB300E을 결합 후 베어로보틱스 전용 다빛채와 시뮬레이터를 사용

1. **다빛채 - DB502S+DB300E 설정**
	- DabitChe_V2.2.0_BearRobotics_502300 > DabitChe.exe 실행
	- 통신설정 
		- `메뉴모음` > 메뉴모음 창 > `통신설정` > `Client TCP/IP` >  `접속하기` > `컨트롤러 연결`
	- 자동전송
		- `메뉴모음` > 메뉴모음 창 > `자동전송`
			- ![[베어_502300_1.png]]
			- (참고확인용) 자동전송목록
				- 화면 설정: 1단 18열 3BPP(8Color)
				- LED 모듈: P2.5 80x40mm 32x16
				-  표출신호 설정: 16D-P16D1S21(Color Order: GBR)
				- 일반문구 페이지 개수 등록: 1개
				- 일반문구> 페이지번호: `1`, 18. 문자: ` `(띄어쓰기 1칸)
	- 자동전송 이후 LED 모듈 **블랙화면 확인**
2. **시뮬레이터 - 실시간 문구 전송**
	- DABITSimulator_V2.1.4_BearRobotics_502300 > DABITSimulator.exe
	- `설정 및 제어` > 프로그램 설정 > 프로토콜 형식: `아스키 프로토콜`
	- `아스키 프로토콜` 
		- 실시간 문구: ![000/T0/F0103/S1000/C1你好/C2バンガワ/C3안녕/C61234/C7Text  /C3다/C4빛/C5솔/C6루/C7션!]
		- 아래의 문구가 표출되는지 확인![[베어_502300_2.png]]


%%
참고: [[PRJ240718-11-베어로보틱스 초기설정-DB502 V6]]
%%
