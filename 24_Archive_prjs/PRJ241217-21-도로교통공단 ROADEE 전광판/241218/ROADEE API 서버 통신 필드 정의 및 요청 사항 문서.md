---
share_link: https://share.note.sx/57ixqh6o#d5RC8knCvdKVYZ4SKIA+2/bszlgKuBQ77TcEGzN2KPM
share_updated: 2024-12-18T12:08:37+09:00
---
# API 서버 요청 및 응답 필드 정의

## 1. **API 서버 요청 필드 (HTTP 형식)**
클라이언트 디바이스는 서버에 요청을 보낼 때 **MAC 주소** 및 **검증 해시 값(CHKSUM)**을 포함한 JSON 데이터를 전송합니다.
- **MACADDR**: 디바이스를 유일하게 식별하기 위한 MAC 주소 정보입니다.
- **CHKSUM**: MAC 주소 및 IP 주소의 유효성을 검증하기 위한 해시 값으로, 서버-디바이스 간 인증 및 보안성을 확보하기 위해 사용됩니다.

### 요청 예시

```json5
{
    "MACADDR": "123456789012",           // 디바이스 MAC 주소 (12자리 문자열)
    "CHKSUM": "dslfsdlkfjsdlk1234989f2jklfg9"  // MAC 및 IP 검증용 해시 값
}
```

## 2. **API 서버 응답 필드 (HTTP 형식)**
API 서버는 요청 처리 후 브로커 접속 정보를 JSON 형식으로 반환합니다. 응답에는 **브로커 IP 주소**, **포트 번호**, **OTP(One-Time Password)**, **방향 코드**, **방향 ID**가 포함됩니다.

### 응답 예시

```json5
{
    "RESULT_CODE": 1000,          // 응답 코드 (1000: 성공)
    "RESULT_MSG": "T",            // 응답 메시지 ("T": 성공)
    "BROKER_INFO": [
        "192.168.1.100",          // 브로커 IP 주소
        4444,                     // 브로커 포트
        "OneTimePassword",        // OTP
        10,                       // 방향 코드
        1                         // 방향 ID
    ]
}
```

- **RESULT_CODE**: 요청 결과 코드 (1000: 처리 성공)
- **RESULT_MSG**: 요청 결과 메시지 (T: 성공)
- **BROKER_INFO**:
    - 브로커 IP 주소: 예) `192.168.1.100`
    - 브로커 포트 번호: 예) `4444`
    - OTP(One-Time Password): 서버-클라이언트 인증에 사용되는 일회성 비밀번호
    - 방향 코드: 예) `10`
    - 방향 ID: 예) `1`

---

# SSL 인증서를 통한 HTTPS 접속 요청 사항

아래는 전광판 디바이스 측에서 서버에 안전하게 접속하기 위해 필요한 SSL 인증서 및 관련 정보를 요청하는 내용입니다.

## 요청 사항
### 1. **SSL 인증서 제공 요청**
서버에 대한 HTTPS 연결을 안전하게 설정하기 위해 다음 정보 제공을 요청드립니다.
- **서버의 SSL 인증서** 또는 **공개키** 파일
- 인증서 형식(예: `.pem` 또는 `.der`)
- 인증서 만료일 및 갱신 절차에 대한 정보

### 2. **서버 도메인 정보 및 SSL 핑거프린트 요청**
SSL 인증서의 유효성 검증을 위해 다음 정보를 요청드립니다.
- **서버 도메인 이름** (예: `api.example.com`)
- 해당 도메인의 **SSL 인증서 핑거프린트** 정보
    - 이 정보는 일반적인 **보안 통신 클라이언트**를 통한 서버 인증에 사용됩니다.

### 3. **HTTPS 접속 테스트 환경 요청**
디바이스에서 서버 인증 및 HTTPS 접속 테스트를 위해 다음 정보 제공을 요청드립니다.
- 테스트용 서버 URL 및 포트 번호
- SSL 인증서 유효성 검증을 통한 HTTPS 접속이 정상적인지 확인할 예정이며, 이를 통해 실시간 브로커 정보 수신 및 통신 안정성을 확보하고자 합니다.

### 4. 요청 정보 예시
- **서버 도메인**: `https://api.example.com`
- **API 서버 포트**: `443` (HTTPS 기본 포트)
- **인증서 형식**: `.pem` 또는 `.der`
- **SSL 인증서 핑거프린트**: 예) `SHA-1: XX:XX:XX:XX...`
- **인증서 유효기간**: `YYYY-MM-DD ~ YYYY-MM-DD`

---

# 시간 동기화 요청 문서

## 요청 목적

본 요청은 **전광판 컨트롤러**가 리셋 후 **서버와 시간을 동기화**할 수 있도록, **서버 측에서 정확한 시간 정보**를 제공할 수 있는 기능을 요청하기 위함입니다. 이 작업은 **UNIX 타임스탬프** 기반으로 **전광판**의 시간 설정을 동기화하고, 이후 전광판에서 발생하는 이벤트 및 메시지 처리의 정확한 시간을 보장하기 위한 목적입니다.

## 요청 사항

### 1. **서버 시간 동기화 API 제공 요청**
- **API 서버가 전광판 컨트롤러에 정확한 시간 정보를 제공할 수 있는 **`GET`** API를 제공해 주시기 바랍니다.**
    - 이 API는 **UNIX 타임스탬프** 형식으로 **서버의 현재 시간**을 반환해야 합니다.
    - 전광판 컨트롤러가 리셋된 후, 이 API를 호출하여 전광판 시간과 서버 시간 간의 동기화 작업을 진행할 수 있어야 합니다.

**예시 API 응답 형식**:
```json5
{
    "RESULT_CODE": 1000,          // 응답 코드 (1000: 성공)
    "RESULT_MSG": "T",            // 응답 메시지 ("T": 성공)
    "SERVER_TIME": 1727403729     // UNIX 타임스탬프 (예: 2024년 6월 19일 21:23:49)
}
```

- **`SERVER_TIME`**: 서버의 현재 시간을 UNIX 타임스탬프 형식으로 제공. 전광판 컨트롤러는 이 시간을 받아 시스템 시계에 적용하여 동기화를 완료합니다.

### 2. **API 서버의 응답 시간 지연 방지**
- 전광판 컨트롤러는 **리셋 후 자동으로** 서버와 시간을 동기화하려 하므로, **응답 시간 지연**이 발생하지 않도록 서버 측에서 **시간 정보 요청에 대한 응답 시간을 최적화**해 주시기 바랍니다.
- 시간 동기화 API는 **서버 리소스를 과도하게 소모하지 않도록** 효율적인 방식으로 구현되어야 합니다.

### 3. **API 서버의 시간 제공 정확성**
- 제공하는 시간 정보는 **정확한 UTC 기반의 시간**이어야 하며, **타임존(timezone)** 정보나 **서머타임(DST)**을 고려하지 않은 **기준 시간(UTC)**을 기준으로 제공해야 합니다.
- 전광판 컨트롤러는 이 값을 받아 **로컬 시간**을 계산하여 적용할 수 있도록 해야 합니다.

### 4. **서버에서 시간 동기화의 주기성**
- 서버와의 시간 동기화 작업은 **리셋 후 한 번** 실행되며, 이후에는 필요 시 **주기적인 동기화**가 필요할 수 있습니다. 이를 위해, 시간 동기화 요청을 받을 수 있는 추가적인 **주기적인 API 호출 방식**에 대한 안내도 함께 제공해 주시기 바랍니다.
