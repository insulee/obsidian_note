---
share_link: https://share.note.sx/rcvjalm2#gbuPGNkO9VTHoVh41lMg/oE9eM7UvFQeADCQ2dTwT8g
share_updated: 2025-01-10T16:25:41+09:00
---
# 전광판 프로토콜 문서

이 문서는 도로교통관리공단에서 사용하는 전광판 제어 및 상태 관리를 위한 **JSON 기반 프로토콜**에 대해 설명합니다. 해당 프로토콜은 전광판의 상태 정보, 메시지 제어, 화면 설정 등 주요 기능을 포함합니다.

--- 

## 전체 JSON 예시 

```json
{
    "2": { // 전광판 관리 섹션
        "RTE058": { // 전광판 이름
            "1": [ // 상태 요약 
                1727403729, // 메시지 전송 시간 (UNIX 밀리초)
                0,          // 상태: 0=대기, 1=작동중, 98=경고, 99=에러
                1727403729, // 이벤트 발생 시간 (UNIX 밀리초)
                1727403729  // 데이터 갱신 타입 (UNIX 밀리초)
            ],
            "2": { // 텍스트 메시지 설정
                "0": { // 실시간 문구(Real-time Text)
                    "1": { // 섹션 1
	                    "0": [0, 3], // 조합형코드/문자(0), 8x16/16x16폰트(3)
                        "1": [1, 99], // 즉시 표시(1), 무한 반복(99)
                        "2": [20, 0, 50, 10], // 입장 효과(20: 좌로이동), 퇴장(0), 속도(50), 유지시간(10초)
                        "3": [0, 48, 0, 16], // X축 시작/종료 픽셀, Y축 시작/종료 픽셀
                        "4": 0, // 예약 이미지 번호
                        "5": [
                            ["보행자", 1, 0, 1], // 텍스트:보행자, 글자색(1), 배경색(0), 폰트그룹(1)
                            ["주의", 3],           // 텍스트:주의, 글자색(3)
                            ["바랍니다"]            // 텍스트:바랍니다
                        ]
                    },
                    "2": { // 섹션 2
	                    "0": [1, 7], // UTF-16코드/유니코드문자(1), 16x32/32x32폰트(7)
                        "1": [0, 99], // 표시 종료(0), 무한 반복(99)
                        "2": [10, 20, 30, 20], // 입장 효과(10), 퇴장 효과(20), 속도(30), 유지시간(20초)
                        "3": [48, 96, 16, 32], // X축 시작/종료 픽셀, Y축 시작/종료 픽셀
                        "4": 2, // 예약 이미지 번호
                        "5": [
                            ["긴급", 2, 0, 2], 		// 텍스트:긴급, 글자색(2), 배경색(0), 폰트그룹(2)
                            ["알림", 4],            // 텍스트:알림, 글자색(4)
                            ["바로 확인"] 		    // 텍스트:바로 확인
                        ]
                    }
                },
                "1": { // 페이지 문구(Page Text) 예: 페이지 문구1
                    "1": { // 섹션 1
	                    "0": [2, 3], // UTF-8코드/조합형문자(2), 8x16/16x16폰트(3)
                        "1": [1, 5], // 즉시 표시(1), 5회 반복(5)
                        "2": [30, 0, 40, 15], // 입장 효과(30: 깜빡임), 퇴장(0), 속도(40), 유지시간(15초)
                        "3": [0, 48, 0, 16], // X축 시작/종료 픽셀, Y축 시작/종료 픽셀
                        "4": 2, // 예약 이미지 번호
                        "5": [
                            ["안전", 2, 0, 2],		 // 텍스트:안전, 글자색(2), 배경색(0), 폰트그룹(2)
                            ["확인", 4], 			 // 텍스트:확인, 글자색(4)
                            ["부탁드립니다"] 		  // 텍스트:부탁드립니다
                        ]
                    },
                    "2": { // 섹션 2
	                    "0": [3, 7], // UTF-8코드/유니코드문자(3), 16x32/32x32폰트(7)
                        "1": [0, 99], // 표시 종료(0), 무한 반복(99)
                        "2": [10, 20, 30, 20], // 입장 효과(10), 퇴장 효과(20), 속도(30), 유지시간(20초)
                        "3": [48, 96, 16, 32], // X축 시작/종료 픽셀, Y축 시작/종료 픽셀
                        "4": 3, // 예약 이미지 번호
                        "5": [
                            ["긴급", 3, 1, 1], 		// 텍스트:긴급, 글자색(3), 배경색(1), 폰트그룹(1)
                            ["상황", 5, 1], 		// 텍스트:상황, 글자색(5), 배경색(1)
                            ["대처 요망"] 			// 텍스트:대처 요망
                        ]
                    }
                },                
            },
            "3": { // 전광판 상태 정보
                "1": "2501013123456", // 전광판 시간: YYMMDD HHMMSS
                "2": 50,             // 밝기 정보(%)
                "3": [6, 2, 0, 0],   // 가로/세로 모듈, 단면 여부, 배열방식
                "4": ["ascii.fnt", "unicode.fnt"], // 폰트 파일
                "5": ["1.0.0", 1000], // 펌웨어 버전, CPU 속도
            },

            "4": { // 전광판 구성 설정
                "1": "2501013123456", // 시간 동기화
                "2": 50,             // 밝기 설정(%)
                "3": [6, 2, 0, 0],   // 화면 설정
                "4": 1,               // 전원 상태: 1=켜기
                "5": 3,				// 페이지 메시지 개수 설정(3개)
				"6": 0  			// 페이지 메시지 초기화 안함
            }
        }
    }
}

```



---

## 목차
1. [[#1. 프로토콜 개요|프로토콜 개요]]
2. [[#2. 데이터 구조|데이터 구조]]
	- [[#2.1 최상위 JSON 구조]]
	- [[#2.2 하위 데이터 섹션]]
3. [[#3. 주요 JSON 섹션 및 항목|주요 JSON 섹션 및 항목]]
	- [[#3.1. 상태 요약]]
	- [[#3.2. 텍스트 메시지 제어]]
		- [[#3.2.1. 데이터 구조]]
		- [[#3.2.2. 주요 필드 설명]]
	- [[#3.3. 전광판 상태 정보]]
		- [[#3.3.1. 데이터 구조]]
		- [[#3.3.2. 주요 필드 설명]]
	- [[#3.4. 전광판 구성 설정]]
		- [[#3.4.1. 데이터 구조]]
		- [[#3.4.2. 주요 필드 설명]]
4. [[#4. 추가 기능 (예정)|추가 기능 (예정)]]

---

## 1. 프로토콜 개요
이 JSON 프로토콜은 전광판의 효율적 제어 및 상태 모니터링을 목적으로 설계되었습니다. 주요 기능은 다음과 같습니다
- **상태 관리**: 전광판의 작동 상태, 밝기, 시간 정보 등을 확인 및 제어
- **메시지 전송**: 실시간 메시지와 페이지 메시지 제어
- **구성 설정**: 화면 모듈, 배치 방식, 전원 제어

JSON 구조는 확장성을 고려해 설계되었으며, 각 기능은 모듈화되어 있습니다.

---

## 2. 데이터 구조
### 2.1 최상위 JSON 구조
```json
{
    "2": {         // 전광판 관리 섹션
        "RTE058": {  // 전광판 이름
            ...
        }
    }
}
```

### 2.2 하위 데이터 섹션
1. **상태 요약 (`"1"`)**
   - 전광판의 현재 상태 및 메시지 전송 정보를 요약
2. **텍스트 메시지 설정 (`"2"`)**
   - 실시간 문구 및 페이지 문구 설정
3. **전광판 상태 정보 (`"3"`)**
   - 전광판의 현재 설정 및 운영 상태
4. **전광판 구성 설정 (`"4"`)**
   - 전광판의 화면, 밝기, 시간 동기화, 전원 설정 등
```json
{
    "2": {         // 전광판 관리 섹션
        "RTE058": {  // 전광판 이름
            "1": [ // 상태 요약
            ],
            "2": { // 텍스트 메시지 설정
            },
            "3": { // 전광판 상태 정보
            },
            "4": { // 전광판 구성 설정
            }
        }
    }
}
```

---

## 3. 주요 JSON 섹션 및 항목
### 3.1. 상태 요약
- `[메시지 전송 시간, 상태, 이벤트 발생 시간, 데이터 갱신 타입]` 형태
- Mandatory, Read Only
- 메시지 전송시간, 이벤트 발생 시간, 데이터 갱신 타입은 UNIX 밀리초로 표현 
- 상태
	- `0`: 대기
	- `1`: 작동 중
	- `98`: 경고
	- `99`: 에러

**예시 코드:**
```json
{
    "2": {     
        "RTE058": {  
            "1": [1727403729, 1, 1727403729, 1727403729],
        }
    }
}

```

---

### 3.2. 텍스트 메시지 설정
#### 3.2.1. 데이터 구조
```json
{
    "2": {         
        "RTE058": {  
            "2": {
			    "페이지 번호": {
			        "섹션 번호": {
				        "0": [문자 코드 유형, 폰트 크기],
			            "1": [메시지 화면 표시 설정],
			            "2": [효과 속성 설정],
			            "3": [섹션 위치 설정],
			            "4": 예약 이미지 번호,
			            "5": [텍스트 메시지 배열]
					}
		        }
		    }
		}
	}
}
```
#### 3.2.2. 주요 필드 설명
- `"페이지 번호"`(Mandatory, Read/Write)
	- 실시간문구(Real-time Text)
		- 정의: 페이지 번호 `0` 사용. 즉시 반영 가능한 단문 메시지를 실시간으로 표시
		- 특징
		    - 즉시 표시(표시 방법=1) 시 이전 메시지 종료 대기 없이 현재 문구를 덮어쓰기 가능
		    - 긴급 안내나 즉각 정보 전달에 적합 ("보행자", "주의" 등)
		    - 무한 반복(99) 설정으로 동일 문구를 지속 노출 가능
		    - 입장/퇴장 효과, 깜빡임, 이동 속도 등의 시각적 연출 가능
	- 페이지문구(Page Text)
		- 정의: 페이지 번호 `1` 이상 사용. 일정 횟수 반복하거나, 주기적으로 바뀌는 문구를 페이지 단위로 관리
		- 특징
		    - 특정 횟수(예: 5회)만 표시 후 종료 가능
		    - 실시간문구보다 덜 긴급하며, 캠페인성 안내, 일정 주기 안내 등에 활용
		    - 다양한 배경 이미지, 효과 적용으로 페이지별 차별화 가능
- `"섹션 번호"`(Mandatory, Read/Write)
	- 섹션(Section) 구분
		- 실시간문구/페이지문구 모두 섹션을 통해 화면의 특정 영역에 메시지 표시
		- 각 섹션은 독립적 설정(표시 방법, 효과, 위치, 배경, 텍스트 배열)을 가져 복합적 화면 구성 가능
- `"0"`: 문자 코드 유형 및 폰트 크기(Optional, Read/Write)
	- 형태: `[문자 코드 유형, 폰트 크기]`
	- 문자 코드 유형
		- `0`: 조합형코드로 전송 / 조합형문자로 표출
		- `1`: UTF-16코드로 전송 / 유니코드문자로 표출
		- `2`: UTF-8코드로 전송 / 조합형문자로 표출
		- `3`: UTF-8코드로 전송 / 유니코드문자로 표출
	- 폰트 크기(픽셀단위의 숫자,영문 / 한글)
		- `3`: 8×16 / 16×16
		- `4`: 10×20 / 20×20
		- `5`: 12×24 / 24×24
		- `6`: 14×28 / 28×28
		- `7`: 16×32(ASCII) / 32×32(조합형, 유니코드)
- `"1"`: 메시지 화면 표시 설정(Optional, Read/Write)
	- 형태: `[표시방법, 표시제어]`
	- 표시방법
		- `0`: 현재의 문구 표시가 종료되고 나서, 다음순서에 새로운 문구를 표시
		- `1`: 현재의 문구 표시를 즉시 중단하고, 새로운 문구를 표시
	- 표시제어
		- `00`: 해당 문구(섹션) 표시 안함
		- `01~98`: 문구 반복 횟수
		- `99`: 문구 표시 무한 반복
- `"2"`: 효과 속성 설정(Optional, Read/Write)
	- 형태: `[입장효과, 퇴장효과, 속도, 유지시간]`
	- 입장효과, 퇴장효과는 효과 표 참고
- `"3"`: 섹션 위치 설정(Optional, Read/Write)
	- 형태: `[x축시작픽셀, x축종료픽셀, y축시작픽셀, y축종료픽셀]`
	- 좌측 상단을 기준으로 픽셀 단위로 값 입력
	- 값이 0이면 시작과 종료 위치 미지정
- `"4"`: 예약 이미지 번호(Optional, Read/Write)
	- 형태: `정수`
	- 전광판 표시제어기(컨트롤러)에 저장된 이미지 표시
- `"5"`: 텍스트 메시지 배열(Mandatory, Read/Write)
	- 형태: `["문구", 글자색, 배경색, 폰트그룹]`
	- 일부 파라미터 생략 시 기본값 적용
	- 최대 10개의 텍스트 메시지 가능
	- 문구
		- 표시할 문구로 숫자, 영문, 한글로 표기 가능
	- 글자색
		- `0`: 검정색, `1`:빨간색 , `2`: 초록색, `3`: 노란색, `4`:파란색, `5`:분홍색, `6`:하늘색, `7`: 흰색
	- 배경색
		- `0`: 검정색, `1`:빨간색 , `2`: 초록색, `3`: 노란색, `4`:파란색, `5`:분홍색, `6`:하늘색, `7`: 흰색
	- 폰트그룹
		- 폰트그룹 번호로 최대 4개의 폰트그룹 설정 가능

---

### 3.3. 전광판 상태 정보
#### 3.3.1. 데이터 구조
```json
{
    "2": {         
        "RTE058": {  
			"3": { // 전광판 상태 정보
			    "1": "YYMMDD 요일 HHMMSS",
			    "2": 밝기 정보 (%),
			    "3": [가로 모듈 크기, 세로 모듈 크기, 단면 여부, 배열방식],
			    "4": [ASCII 폰트 파일, 유니코드 폰트 파일],
			    "5": [펌웨어 버전, CPU 속도],
            }
		}
	}
}
```

#### 3.3.2. 주요 필드 설명
- `"1"`: 전광판 시간 정보(Optional, Read Only)
	- 형태: `YYMMDD 요일 HHMMSS`
	- `YYMMDD`는 날짜, `HHMMSS`는 시간(시, 분, 초), `요일`은 0~6의 값(0=일요일, 6=토요일)
	- 예: `"2501013123456"` (25년 1월 1일, 수요일, 12시 34분 56초)
- `"2"`: 밝기 정보(Optional, Read Only)
	- 형태: `정수`로 % 값
	-  `0`: 최소 밝기, `100`: 최대 밝기
	- 예: `50` (50% 밝기)
- `"3"`:  전광판 설정 정보(Optional, Read Only)
	- 형태: `[가로모듈크기, 세로모듈크기, 단면 여부, 배열방식]`
	- 가로 모듈 크기
		- 가로모듈전체 픽셀에서 16을 나눈 값
		- 예: `6`(가로모듈픽셀 개수가 96개)
	- 세로 모듈 크기
		- 세로모듈전체 픽셀에서 16을 나눈 값
		- 예: `2`(세로모듈픽셀 개수가 32개)
	- 단면 여부
		- `0`: 단면
		- `1`: 양면
	- 배열방식
		- `0`: 가로형기본
		- `1`: 1줄 세로형
		- `2`: 2줄 세로형
		- `3`: 양면 가로형
		- 배열방식에 관한 내용은 [DABITDOCS](https://publish.obsidian.md/dabitdocs/2.+%EC%82%AC%EC%9A%A9%EC%9E%90+%EB%A7%A4%EB%89%B4%EC%96%BC/2.6.+LED+%EB%AA%A8%EB%93%88/2.6.2.+LED+%EB%AA%A8%EB%93%88+%EB%B0%B0%EC%97%B4%EB%B0%A9%EB%B2%95) 참고
	- 예: `[6, 2, 0, 0]` (가로 모듈 6, 세로 모듈 2, 단면, 가로형기본)
- `"4"`: 폰트 파일 정보(Optional, Read Only)
	- 형태: `["폰트파일명.fnt", "폰트파일명.fnt"]`
	- 예: `["ascii.fnt", "unicode.fnt"]`
- `"5"`: 펌웨어 버전 및 CPU 속도(Optional, Read Only)
	- 형태: `["펌웨어 버전", "CPU 속도"]`
	- 예: `["1.0.0", 1000]`

**예시 코드:**
```json
{
    "2": {         
        "RTE058": {  
			"3": { // 전광판 상태 정보
				"1": "2501013123456",
				"2": 50,
				"3": [6, 2, 0, 0],
				"4": ["ascii.fnt", "unicode.fnt"],
				"5": ["1.0.0", 1000],
            }
		}
	}
}
```

---

### 3.4. 전광판 구성 설정
#### 3.4.1. 데이터 구조
```json
{
    "2": {         
        "RTE058": {  
			"4": { // 전광판 구성 설정
			    "1": "YYMMDD 요일 HHMMSS",  
			    "2": 밝기 설정 (%),
			    "3": [가로 모듈 수, 세로 모듈 수, 단면 여부, 배열방식],
			    "4": 전원 설정,
			    "5": 페이지 메시지 개수,
				"6": 페이지 메시지 초기화 여부
            }
		}
	}
}
```
#### 3.4.2. 주요 필드 설명
1. `"1"`: 시간 동기화(Optional, Read/Write)
    - 형태: `YYMMDD 요일 HHMMSS`
    - 전광판 시간을 동기화하는 값으로, `YYMMDD`는 날짜, `HHMMSS`는 시간(시, 분, 초), `요일`은 0~6의 값(0=일요일, 6=토요일)
    - 예: `"2501013123456"` (25년 1월 1일, 수요일, 12시 34분 56초)
2. `"2"`: 밝기 설정(Optional, Read/Write)
    - 형태: `정수`로 % 값
    -  `0`: 최소 밝기, `100`: 최대 밝기
    - 예: `50` (50% 밝기)
3. `"3"`: 화면 설정(Optional, Read/Write)
	- 형태: `[가로모듈크기, 세로모듈크기, 단면 여부, 배열방식]`
	- 가로모듈크기
		- 가로 모듈 크기
		- 가로모듈전체 픽셀에서 16을 나눈 값
		- 예: `6`(가로모듈픽셀 개수가 96개)
	- 세로 모듈 크기
		- 세로모듈전체 픽셀에서 16을 나눈 값
		- 예: `2`(세로모듈픽셀 개수가 32개)
	- 단면 여부
		- `0`: 단면
		- `1`: 양면
	- 배열방식
		- `0`: 가로형기본
		- `1`: 1줄 세로형
		- `2`: 2줄 세로형
		- `3`: 양면 가로형
		- 배열방식에 관한 내용은 [DABITDOCS](https://publish.obsidian.md/dabitdocs/2.+%EC%82%AC%EC%9A%A9%EC%9E%90+%EB%A7%A4%EB%89%B4%EC%96%BC/2.6.+LED+%EB%AA%A8%EB%93%88/2.6.2.+LED+%EB%AA%A8%EB%93%88+%EB%B0%B0%EC%97%B4%EB%B0%A9%EB%B2%95) 참고
	- 예: `[6, 2, 0, 0]` (가로 모듈 6, 세로 모듈 2, 단면, 가로형기본)
4. `"4"`: 전원 설정(Optional, Read/Write)
    - 형태: `정수`
    - `0`: 전원 끔, `1` : 전원 켬
5. `"5"`: 페이지 메시지 개수 설정 (Optional, Read/Write)
    - 형태: `정수`
	- `1~10` 사이의 정수로 페이지 메시지의 개수를 설정
6. `"6"`: 페이지 메시지 초기화 여부 (Optional, Read/Write)
	- 형태: `정수`
	- `0`: 초기화 안 함, `1`: 초기화



**예시 코드:**
```json
{
    "2": {         
        "RTE058": {  
			"4": { // 전광판 구성 설정
				"1": "2501013123456",  // 시간 동기화
			    "2": 50,               // 50% 밝기
			    "3": [6, 2, 0, 0],   // 가로 모듈(6개), 세로 모듈(2개), 단면, 가로형기본
			    "4": 1,               // 전원 켜기
			    "5": 3, 			// 페이지 메시지 3개
				"6": 0            	// 페이지 메시지 초기화 안함
            }
		}
	}
}
```

---

## 4. 추가 기능 (예정)
- 그래픽 및 GIF 이미지 전송 (`5`, `6`)
  - 예상 일정: 2025년 8월
- 폰트 파일 전송 (`7`)
  - 예상 일정: 2025년 3월
- 펌웨어 업데이트 (`8`)
  - 예상 일정: 2025년 3월

