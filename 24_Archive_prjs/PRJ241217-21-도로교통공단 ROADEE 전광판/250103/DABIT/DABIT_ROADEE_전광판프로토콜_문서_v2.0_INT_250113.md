# **전광판 프로토콜 문서 

이 문서는 전광판(Variable Message Sign, VMS)의 **제어** 및 **상태 관리를 위한 JSON 기반 프로토콜**을 정의합니다. 전광판의 상태 모니터링, 메시지 표시, 구성 설정 등 다양한 기능을 명시하여, **서버**와 **전광판** 간 통신을 효율적으로 수행할 수 있도록 합니다.

---

## **1. 프로토콜 개요**

- **관리 및 제어 대상**
    - 전광판의 작동 상태, 밝기, 시간, 전원, 화면 모듈 구성 등
- **주요 목적**
    - 전광판 상태 모니터링과 메시지 변경을 **표준화된 JSON**을 통해 처리
- **MQTT 환경**
    - QoS, Retain, Clean Session 등 MQTT 속성은 아래 항목에서 별도 정의

---

## **2. 전체 JSON 구조**

전광판을 관리하는 최상위 키는 `"2"`(전광판 관리 섹션)이며, 그 하위에 전광판 식별자(예: `"RTE058"`)가 배치됩니다.

```json
{
  "2": {                  // 전광판 정보
    "RTE058": {           // 전광판 식별자 (예: RTE058)
      "1": [ ... ],       // 상태 요약
      "2": { ... },       // 전광판 상태 정보
      "3": { ... },       // 전광판 구성 설정
      "4": { ... },       // 이미지 파일 전송
      "5": [ ... ],       // 이미지 스케줄 관리
	  "6": { ... }        // 텍스트 메시지 제어
    }
  }
}
```

아래는 각 섹션에 대한 상세 설명입니다.

---

### **2.1. 상태 요약 (`"1"`)**

```json
"1": [
  1727403729, // 메시지 전송 시간 (UNIX 밀리초)
  0,          // 현재 상태: 0=대기, 1=작동중, 98=경고, 99=에러
  1727403729, // 이벤트 발생 시간 (UNIX 밀리초)
  1727403729  // 데이터 갱신 시간 (UNIX 밀리초)
]
```
- **메시지 전송 시간**: 이 프로토콜 데이터를 **언제**(어떤 시점)에 **전송**했는지 파악.
- **현재 상태**: 전광판이 지금 정상/경고/에러 중 어느 상태인지 한눈에 확인.
- **이벤트 발생 시간**: 장애·알림 등 **특정 이벤트**가 언제 일어났는지 추적.
- **데이터 갱신 시간**: 현재 표시 중인 메시지/상태가 언제 **최종 업데이트**되었는지 확인.

---

### **2.2. 전광판 상태 정보 (`"2"`)**

```json
"2": {
  "1": 1727403729,           // 전광판 시간 정보 (UNIX 밀리초)
  "2": 50,                   // 전광판 밝기 정보 (%)
  "3": [6, 2, 0, 0],         // 전광판 설정 정보
  "4": ["ascii.fnt", "unicode.fnt"], // 사용 중인 폰트 파일 목록
  "5": ["1.0.0", 1000]       // 펌웨어 버전, CPU 속도
}
```

| 키     | 예시값                  | 설명                                               |
| ----- | -------------------- | ------------------------------------------------ |
| `"1"` | `1727403729`         | 전광판 시간 (UNIX 밀리초)                                |
| `"2"` | `50`                 | 전광판 밝기 설정 (`0`: 최소 ~ `100`: 최대, %)               |
| `"3"` | `[6, 2, 0, 0]`       | 전광판 설정 정보<br>: `[가로 모듈 수, 세로 모듈 수, 단면 여부, 배열방식]` |
| `"4"` | `["ascii.fnt", ...]` | 사용 중인 폰트 파일 목록                                   |
| `"5"` | `["1.0.0", 1000]`    | `[펌웨어 버전, CPU 속도(MHz)]`                          |
- `"3"`:  전광판 설정 정보
	- 형태: `[가로모듈 수, 세로모듈 수, 단면 여부, 배열방식]`
	- 가로 모듈 수
		- 가로모듈전체 픽셀에서 16을 나눈 값
		- 예: `6`(가로모듈픽셀 개수가 96개)
	- 세로 모듈 수
		- 세로모듈전체 픽셀에서 16을 나눈 값
		- 예: `2`(세로모듈픽셀 개수가 32개)
	- 단면 여부
		- `0`: 단면
		- `1`: 양면
	- 배열방식
		- `0`: 가로형기본
		- `1`: 1줄 세로형
		- `2`: 2줄 세로형
		- `3`: 양면 가로형
		- 배열방식에 관한 내용은 [DABITDOCS](https://publish.obsidian.md/dabitdocs/2.+%EC%82%AC%EC%9A%A9%EC%9E%90+%EB%A7%A4%EB%89%B4%EC%96%BC/2.6.+LED+%EB%AA%A8%EB%93%88/2.6.2.+LED+%EB%AA%A8%EB%93%88+%EB%B0%B0%EC%97%B4%EB%B0%A9%EB%B2%95) 참고
	- 예: `[6, 2, 0, 0]` (가로 모듈 6, 세로 모듈 2, 단면, 가로형기본)
---

### **2.3. 전광판 구성 설정 (`"3"`)**

```json
"3": {
  "1": 1727403729,       // 전광판 시간 동기화 (UNIX 밀리초)
  "2": 50,               // 전광판 밝기 설정 (%)
  "3": [6, 2, 0, 0],     // 전광판 설정 정보
  "4": 1,                // 전광판 전원 설정
  "5": 3,                // 페이지 메시지 개수
  "6": 1                 // 페이지 메시지 전체삭제(1=전체삭제)
}
```

| 키     | 예시값            | 설명                                                                 |
| ----- | -------------- | ------------------------------------------------------------------ |
| `"1"` | `1727403729`   | 전광판 시간 동기화 (UNIX 밀리초)                                              |
| `"2"` | `50`           | 전광판 밝기 설정 (`0`: 최소 ~ `100`: 최대)                                    |
| `"3"` | `[6, 2, 0, 0]` | 전광판 설정 정보(전광판 상태 정보(`"2"`)와 동일)<br>: `[가로 모듈, 세로 모듈, 단면 여부, 배열방식]` |
| `"4"` | `1`            | 전광판 전원 설정 (`0`: 끄기, `1`: 켜기)                                       |
| `"5"` | `3`            | 페이지 메시지 개수 설정                                                      |
| `"6"` | `1`            | 페이지 메시지 전체 삭제(1=전체삭제, 0=삭제 안 함)                                    |

---

### **2.4. 이미지 파일 전송 (`"4"`)**

```json
"4": {
  "1": "updating",          // 이미지 파일 전송 상태
  "2": "flashing.bmp",      // 이미지 파일명
  "3": [10, 1],             // 이미지 파일 전송 정보
  "4": "Base64EncodedData"  // Base64로 인코딩된 이미지 데이터 (BMP/JPG)
}
```

| 키     | 예시값                   | 설명                                                          |
| ----- | --------------------- | ----------------------------------------------------------- |
| `"1"` | `"updating"`          | 이미지 파일 전송 상태<br>:`"updating"`: 파일 전송 중 / `"updated"`: 전송 완료 |
| `"2"` | `"flashing.bmp"`      | 이미지 파일명 (최대 70바이트)                                          |
| `"3"` | `[10, 1]`             | 이미지 파일 전송 정보<br>:`[분할된 파일 전체 개수, 현재 전송 파일 Index]`           |
| `"4"` | `"Base64EncodedData"` | Base64로 인코딩된 이미지 데이터 (BMP/JPG)<br> 1500바이트 이하로 전송가능         |

- **이미지 파일 전송 정보**: 이미지 파일이 대용량일 경우, 1500바이트 단위로 분할 전송
	- 예: `[10, 1]`- `flashing.bmp` 파일을 1500바이트 단위로 분할 시 총 파일 수가 10개, 현재 파일 Index 1번

---

### **2.5. 이미지 스케줄 관리 (`"5"`)**

```json
"__5": "이미지 스케줄 관리"
"5": {
	"1" : { // 1번 스케줄
		"1": "flashing.bmp",  // 이미지 파일명
		"2": "flash",         // 이미지 효과(stop=정지효과, flash=깜빡이기, move_left=왼쪽으로 이동 등)
		"3": {                // 이미지 효과 파라미터
			"1": 500,         // 반복 간격(ms)
			"2": 5000,        // 유지 시간(ms)
			"3": 50,          // 이미지 효과 속도(0~99), 높은 값일수록 빠르게 표시
			"4": 1000,        // 이미지 효과 지연 시간(ms)
		} 
  },
	"2" : { // 2번 스케줄
		"1": "move_left.bmp",  // 이미지 파일명
		"2": "move_left",      // 이미지 효과(stop=정지효과, flash=깜빡이기, move_left=왼쪽으로 이동 등)
	    "3": {                 // 이미지 효과 파라미터
			"1": 500,          // 반복 간격(ms)
			"2": 1000,         // 유지 시간(ms)
			"3": 20,           // 이미지 효과 속도(0~99), 높은 값일수록 빠르게 표시
			"4": 1000,         // 이미지 효과 지연 시간(ms)
    } 
  }
}
```

- **이미지 효과**: `flash`, `move_left`, `blinking`, `stop` 등 다양한 효과 정의 가능
- **이미지 효과 파라미터**: 효과별 파라미터(속도, 간격, 유지 시간 등)

---

### **2.6. 텍스트 메시지 제어 (`"6"`)**

아래 구조를 통해 **실시간 문구**(페이지 번호 `0`)와 **페이지 문구**(페이지 번호 `1` 이상)를 구분하고, 각각의 표시 효과와 배치 좌표를 세부적으로 지정합니다.

```jsonc
"6": {
  "{페이지 번호}": {
    "{섹션 번호}": {
      "1": [메시지 화면 표시 설정],
      "2": [효과 속성 설정],
      "3": [섹션 위치 설정],
      "4": "예약 이미지 번호",
      "5": [텍스트 메시지 배열]
    }
  }
}
```

#### **실시간문구(Real-time Text)** vs. **페이지문구(Page Text)**

1. **실시간문구(Real-time Text)**
    
    - **페이지 번호**: `0` 사용
    - **특징**:
        - 즉시 반영 가능한 **단문** 메시지를 **실시간**으로 표시
        - 기존 표시가 끝나기 전이라도 **즉시 덮어쓰기** 가능(표시 방법=1)
        - 긴급 안내나 즉각 정보 전달(예: “보행자 주의”)에 적합
        - 무한 반복(99) 설정으로 동일 문구를 지속 노출 가능
        - **입장/퇴장 효과**, 깜빡임, 이동 속도 등의 시각적 연출로 가시성 향상
2. **페이지문구(Page Text)**
    
    - **페이지 번호**: `1` 이상 사용
    - **특징**:
        - 일정 횟수(예: 5회) 표시 후 종료하거나, 일정 주기로 변경될 문구를 **페이지 단위**로 관리
        - 실시간문구보다 **긴급도가 낮은 안내**(캠페인성 광고, 주기적 홍보 문구 등)
        - 페이지마다 **배경 이미지**, 다양한 **효과** 등을 적용해 **차별적 연출** 가능
        - **구성 설정(`"5"`)**에서 페이지 메시지 개수를 설정했을 경우, 해당 개수 범위 안에서 페이지 번호를 사용

#### **섹션(Section) 번호**

- **실시간문구**와 **페이지문구** 모두 섹션을 통해 **화면의 특정 부분**에 메시지를 표시
- 한 페이지(또는 실시간문구) 내에 **여러 섹션**을 지정해, **다양한 영역**에 서로 다른 메시지를 표시 가능
- 각 섹션은 다음 필드를 통해 표시 방법, 좌표, 배경 이미지 등을 독립적으로 설정
    - `"1"`: 메시지 화면 표시 설정
    - `"2"`: 효과 속성 설정
    - `"3"`: 섹션 위치 설정
    - `"4"`: 예약 이미지 번호
    - `"5"`: 텍스트 메시지 배열

#### **주요 필드 설명**

- **`"1"` (메시지 화면 표시 설정)**
    - `[표시 방법, 표시 횟수]`
    - 예: `[1, 99]` → 즉시 표시(1), 무한 반복(99)
- **`"2"` (효과 속성 설정)**
    - `[입장 효과, 퇴장 효과, 속도, 유지 시간]`
    - 예: `[20, 0, 50, 10]` → 좌로 이동(20), 퇴장 효과 없음(0), 속도(50), 유지(10초)
- **`"3"` (섹션 위치 설정)**
    - `[X축 시작, X축 종료, Y축 시작, Y축 종료]` (픽셀 단위)
    - 예: `[0, 96, 0, 16]` → 가로 방향(폭) 96픽셀, 세로 방향(높이) 16픽셀 영역
    - 예: `[0, 0, 0, 0]` → 전광판 전체 화면
- **`"4"` (예약 이미지 번호)**
    - 텍스트 메시지 배경으로 사용할 이미지 번호 지정
    - 예: `1` → 사전에 정의된 이미지 슬롯 #1
- **`"5"` (텍스트 메시지 배열)**
    - 최대 10개의 텍스트 메시지 가능
    - 구조: `[ "문구", 글자색, 배경색, 폰트그룹번호]`
    - 예: `[["보행자", 1, 0, 0], ["주의", 3], ["바랍니다"]]`
    - 일부 파라미터 생략 시 기본값 적용

---

## **3. MQTT 설정**

### **3.1 QoS (Quality of Service)**

- **전광판 클라이언트는 QoS `0`으로 설정**
    - `0`: At most once (확인 응답 없이 최대 1회 전송)
    - `1`: At least once (메시지 유실 없도록 최소 1회 전달 & 확인)
    - `2`: Exactly once (중복 없이 정확히 1회 전달)

### **3.2 패킷 분할**

- **1500바이트 이하**로 메시지를 분할 전송 권장 (이미지 전송 시 Base64 인코딩 등)
- 대용량 데이터(이미지, 스케줄 파일 등)는 여러 패킷으로 나누어 **수신 완료** 후 `"updated"` 상태로 전환

### **3.3 Retain 설정**

- **`false` 사용** (메시지를 브로커에 저장하지 않음)
    - `true`: 브로커가 마지막 메시지를 저장, 새 구독자 연결 시 즉시 전달
    - `false`: 기존 메시지를 저장하지 않음. 구독 중인 클라이언트만 수신

### **3.4 Clean Session**

- **`false` 사용** (기존 세션 및 구독 정보, 메시지 큐 유지)
    - 오프라인 중 발행된 QoS1/2 메시지를 재수신 가능
    - 전광판이 자주 오프라인되는 환경에서 유용

---

## 4. 최종 예시 JSON** (주석 포함)

아래는 **예시**로, 하나의 전광판(`"RTE058"`)에 대한 모든 섹션을 기술한 **완성형 JSON**입니다. 실제 운영 시에는 **필요한 섹션만** 발행하거나, **대용량 파일**을 여러 메시지로 분할해서 전송합니다.  
주석(`"__<키>"`) 필드는 **사람이 읽기 쉽게** 하기 위한 설명 용도로 삽입했으며, 실제 파싱 환경에서는 제거되는 것이 일반적입니다.

```json
{
	"__2": "전광판 정보",
	"2": {
		"__RTE058": "전광판 식별자",
		"_RTE058": ["M", "JSONOBJECT", "R/O"],
		"RTE058": {
			"__1": ["상태 요약",
				"메시지 전송 시간", 
				"현재 상태(0=대기, 1=작동중, 98=경고, 99=에러)",
				"이벤트 발생 시간(UNIX 밀리초)",
				"데이터 갱신 시간(UNIX 밀리초)"
			],
			"_1": ["M", "ARRAY[TIMESTAMP.MS, UINT, TIMESTAMP.MS, TIMESTAMP.MS]", "R/O"],
			"1": [
				1727403729, 
				0,          
				1727403729, 
				1727403729  
			],
			
			"__2": "전광판 상태 정보",
			"_2": ["O", "JSONOBJECT", "R/O"],
			"2": {
				"__1": "전광판 시간 정보 (UNIX 밀리초)",
				"_1":["O", "LONG", "R/O"],
				"1": 1727403729,
			
				"__2": "전광판 밝기 정보(%)",
				"_2":["O", "INT", "R/O"],
				"2": 50,
				
				"__3": ["전광판 설정 정보",
					"가로모듈 수(column, 16픽셀이 1열의 기준)",
					"세로모듈 수(row, 16픽셀이 1단의 기준)",
					"단면 여부(0=단면, 1=양면)",
					"배열방식(0=가로형 기본, 1=1줄 세로형, 2=2줄 세로형, 3=양면 가로형)"
				],
				"_3":["O", "ARRAY(INT)", "R/O"],
				"3": [6, 2, 0, 0],
			
				"__4": "사용 중인 폰트 파일 목록",
				"_4":["O", "ARRAY(STRING)", "R/O"],
				"4": ["ascii.fnt", "unicode.fnt"],
			
				"__5": ["펌웨어 버전",
					"CPU속도(MHz)"
				],
				"_5":["O", "ARRAY(STRING, INT)", "R/O"],
				"5": ["1.0.0", 1000]
			},

			"__3": "전광판 구성 설정",
			"_3":["O", "JSONOBJECT", "R/O"],
			"3": {
				"__1": "전광판 시간 동기화 (UNIX 밀리초)",
				"_1":["O", "LONG", "R/O"],  
				"1": 1727403729,
			
				"__2": "전광판 밝기 설정(%)",
				"_2":["O", "INT", "R/O"],
				"2": 50,
			
				"__3":["전광판 설정 정보",
					"가로모듈 수(column)",
					"세로모듈 수(row)",
					"단면 여부(0=단면, 1=양면)",
					"배열방식(0=가로형 기본, 1=1줄 세로형, 2=2줄 세로형, 3=양면 가로형)"
				],
				"_3":["O", "ARRAY(INT)", "R/O"],
				"3": [6, 2, 0, 0],
			
				"__4": "전광판 전원 설정(0=끄기, 1=켜기)",
				"_4":["O", "INT", "R/O"],
				"4": 1,
				
		        "__5": "페이지 메시지 개수",
		        "5": 3,
		        
		        "__6": "페이지 메시지 삭제(0=삭제 안함, 1=전체 삭제)",
		        "6": 1
		      },

			"__4": "이미지 파일 전송",
			"_4":["M", "JSONOBJECT", "R/O"],
			"4": {
				"__1": "이미지 파일 전송 상태(updating=파일 전송 중, updated=전송 완료)",
				"_1":["M", "STRING", "R/O"],
				"1": "updating",
			
				"__2": "이미지 파일명 (최대 70byte)",
				"_2":["M", "STRING", "R/W"],
				"2": "flashing.bmp",
			
				"__3": ["이미지 파일 전송 정보",
					"분할된 파일 전체 개수",
					"현재 전송 파일 Index"
				],
				"_3":["M", "ARRAY(INT)", "R/O"],
				"3": [10, 1],
			
				"__4": "Base64로 인코딩된 이미지 데이터(1500byte 이하 분할)",
				"_4":["M", "STRING", "R/O"],
				"4": "Base64EncodedData"
			},


			"__5": "이미지 스케줄 관리",
			"_5":["M", "JSONOBJECT", "R/O"],
			"5": {
				"__{i}" : "이미지 스케줄 번호",
				"_{i}": ["M", "JSONOBJECT", "R/W"],
				"{i}" : {
					
					"__1" : "이미지 파일명",
					"_1":["M", "STRING", "R/W"],
					"1": "flashing.bmp",
					
					"__2" : "이미지 효과(stop=정지효과, flash=깜빡이기, move_left=왼쪽으로 이동 등)",
					"_2":["M", "STRING", "R/W"],
					"2": "flash", 
					
					"__3" : "이미지 효과 파라미터",
					"_3":["O", "JSONOBJECT", "R/O"],
					"3": {
						"__1": "반복 간격(ms)",
						"_1":["O", "INT", "R/W"],
						"1": 500,
						
						"__2": "유지 시간(ms)",
						"_2":["O", "INT", "R/W"],
						"2": 5000,
						
						"__3": "이미지 효과 속도(0~99), 높은 값일수록 빠르게 표시",
						"_3":["O", "INT", "R/W"],
						"3": 50,
						
						"__4": "이미지 효과 지연 시간(ms)",
						"_4":["O", "INT", "R/W"],
						"4": 1000
					} 
				}
			},

		      "__6": "텍스트 메시지 제어"
		      "6": {
		        "__0": "실시간 문구(Real-time Text, 페이지번호=0)"
		        "0": {
		          "__1": "섹션 번호(예: 1)"
		          "1": {
		            "__1": "[표시 방법, 표시 횟수]"
		            "1": [1, 99],
		            "__2": "[입장 효과, 퇴장 효과, 속도, 유지 시간]"
		            "2": [20, 0, 50, 10],
		            "__3": "[X축 시작, X축 끝, Y축 시작, Y축 끝]"
		            "3": [0, 100, 0, 100],
		            "__4": "예약 이미지 번호"
		            "4": 1,
		            "__5": "["문구", 글자색, 배경색, 폰트그룹번호]"
		            "5": [
		              ["보행자", 7, 0, 0],
		              ["주의", 3],
		              ["바랍니다"]
		            ]
		          }
		        },
		        "__1": "페이지 문구(Page Text, 페이지번호=1)"
		        "1": {
		          "__1": "섹션번호(예: 1)"
		          "1": {
		            "1": [1, 5],
		            "2": [30, 0, 40, 15],
		            "3": [0, 96, 0, 16],
		            "4": 2,
		            "5": [
		              ["안전", 2, 0, 0],
		              ["확인", 4],
		              ["부탁드립니다"]
		            ]
		          },
		          "__2": "섹션번호(예: 2)"
		          "2": {
		            "1": [0, 99],
		            "2": [0, 96, 16, 32],
		            "3": [0, 100, 50, 100],
		            "4": 3,
		            "5": [
		              ["긴급", 3, 1, 0],
		              ["상황", 5, 1],
		              ["대처 요망"]
		            ]
          }
        }
      }
    }
  }
}
```

---

## 부록1. `"1"` 섹션의 각 항목 용도

```jsonc
"1": [
  1727403729, // 메시지 전송 시간 (UNIX 밀리초)
  0,          // 현재 상태: 0=대기, 1=작동중, 98=경고, 99=에러
  1727403729, // 이벤트 발생 시간 (UNIX 밀리초)
  1727403729  // 데이터 갱신 시간 (UNIX 밀리초)
]
```

1. **메시지 전송 시간** (UNIX 밀리초)
    
    - **의도**: 프로토콜 데이터를 **언제**(어떤 시점)에 **전송**했는지.
    - **이유**: 서버가 “이 메시지가 발행된 지 얼마나 됐나?” 등 시간차를 확인 가능.
2. **현재 상태** (`0`=대기, `1`=작동중, `98`=경고, `99`=에러)
    
    - **의도**: 전광판이 지금 정상인지, 경고·에러 상태인지 **즉각 파악**하기 위함.
    - **이유**: 서버/관리자가 전광판 이상 상태를 **빠르게 알 수 있어야** 유지보수 가능.
3. **이벤트 발생 시간** (UNIX 밀리초)
    
    - **의도**: 특정 이벤트(에러·알림·설정 변경 등)가 **언제** 일어났는지 기록.
    - **이유**: 전광판 상태나 이벤트를 **시간 순서**대로 관리하고, 다른 장비와의 로그를 동기화.
4. **데이터 갱신 시간** (UNIX 밀리초)
    
    - **의도**: 전광판 내부 데이터(상태·메시지·설정)가 **마지막으로 언제 업데이트**되었는지 추적.
    - **이유**: 서버에서 **오래된 데이터**임을 감지하거나, 새로운 데이터 전송 시점 판단에 활용.

## 부록2. MQTT 수신 오류 코드 정의

MQTT 프로토콜을 통해 전광판(디바이스)와 통신할 때, **수신(JSON) 파싱**이나 **로직 검증** 과정에서 발생할 수 있는 대표적인 오류 코드를 정리합니다. 각 오류 코드는 다음과 같이 #define 매크로로 선언하여 사용하며, 시스템에 맞춰 **RESULT_CODE**나 내부 처리 결과로 반환할 수 있습니다.

```c
#define MQTT_RX_SUCCESS                 0   // 정상 처리
#define MQTT_RX_FAIL                    1   // 일반 실패(세부 원인 불명)
#define MQTT_RX_ERR_JSON_PARSE         -1   // JSON 파싱 오류
#define MQTT_RX_ERR_VER_MISMATCH       -2   // 지원하지 않는 MSG_VER
#define MQTT_RX_ERR_FIELD_MISMATCH     -3   // 필수 키 누락 (MSG_TYPE, MSG_ID 등)
#define MQTT_RX_ERR_MOID_MISMATCH      -4   // MOID 구조 및 자료형 오류
#define MQTT_RX_ERR_PARAM_RANGE        -5   // 파라미터 값 범위 초과 / 유효성 검증 실패
#define MQTT_ERR_DEVICE_MISMATCH       -6   // RS232 장치 수신 오류(수신 메시지 없음, 메시지 형식 오류 등)
#define MQTT_RX_ERR_INTERNAL_ERROR     -7   // 내부 처리 에러(미분류)
```

### 에러 코드 요약

|코드|정의 상수|의미|
|:-:|:--|:--|
|0|`MQTT_RX_SUCCESS`|정상 처리 (오류 없음)|
|1|`MQTT_RX_FAIL`|일반 실패 (세부 원인 불명)|
|-1|`MQTT_RX_ERR_JSON_PARSE`|수신된 JSON 문법/구조가 잘못되었거나 파싱 실패|
|-2|`MQTT_RX_ERR_VER_MISMATCH`|메시지 버전(`MSG_VER`)이 지원되지 않음|
|-3|`MQTT_RX_ERR_FIELD_MISMATCH`|필수 필드(예: `MSG_TYPE`, `MSG_ID`)가 누락되었거나 타입 불일치|
|-4|`MQTT_RX_ERR_MOID_MISMATCH`|`MOID` 구조가 잘못되었거나, 자료형이 기대와 다름|
|-5|`MQTT_RX_ERR_PARAM_RANGE`|매개변수 값이 범위를 초과하거나 유효성 검증에 실패 (예: 밝기=200 등)|
|-6|`MQTT_ERR_DEVICE_MISMATCH`|RS232 등 하위 장치 간 수신 오류 (메시지 누락, 형식 불일치 등)|
|-7|`MQTT_RX_ERR_INTERNAL_ERROR`|그 외 내부 처리 에러(미분류). 로직상 예외 케이스 등을 포괄적으로 처리|
