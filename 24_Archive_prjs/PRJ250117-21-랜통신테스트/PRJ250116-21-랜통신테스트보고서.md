
## 1. 테스트 목적

전광판 컨트롤러의 네트워크 트래픽 처리 성능을 평가하여 각 기기의 상대적인 안정성과 트래픽 견딤 능력을 확인하고, UDP 브로드캐스트 환경에서 TCP/IP 기반의 파일 전송 안정성을 분석합니다.

## 2. 테스트 환경

### 2.1 테스트 구성

- **네트워크 구성**:
    - 브로드캐스트 방식 UDP 데이터 전송
    - TCP/IP 기반 폰트 파일 전송
- **테스트 장비**:
    - 테스트용 PC (Python 스크립트 실행)
    - 전광판 컨트롤러 (DB600, DB500, DB300E 등)
    - 네트워크 스위치 또는 라우터

### 2.2 테스트 대상 기기 및 IP 세팅

| 집: 172.30.1.###<br>회사: 192.168.1.### | IP address 4번째 옥탯 |
| ------------------------------------ | ----------------- |
| DB600(V3.0.8, V2.5.3)                | 221, 222          |
| DB500(V3.0.8, V2.5.3)                | 223, 224          |
| DB300E + DB600(V3.0.8)               | 225               |
| DB300E + DB500(V3.0.8)               | 226               |
| 위즈넷(구형) + DB600(V3.0.8)              | 227               |
| 위즈넷(신형) + DB600(V3.0.8)              | 228               |
| 솔내시스템 + DB600(V3.0.8)                | 229               |

### 2.3 테스트 구성

#### TEST1. 컨트롤러별/버전별 비교

- 4포트 스위치 허브
    - 포트1: DB600(V3.0.8)
    - 포트2: DB600(V2.5.3)
    - 포트3: DB500(V3.0.8)
    - 포트4: DB500(V2.5.3)

#### TEST2. 컨버터 유무 비교
- 4포트 스위치 허브
    - 포트1: DB600(V3.0.8)
    - 포트2: DB500(V3.0.8)
    - 포트3: DB300E + DB600(V3.0.8)
    - 포트4: DB300E + DB500(V3.0.8)
- 4포트 스위치 허브
	- 포트1: DB300E + DB600(V3.0.8)
	- 포트2: DB300E + DB500(V3.0.8)
	- 포트3: DB300E + DB502(V3.0.9)

#### TEST3. 업체별 비교

- 4포트 스위치 허브
    - 포트2: DB300E + DB600(V3.0.8)
    - 포트3: 위즈넷(구형) + DB600(V3.0.8)
    - 포트4: 위즈넷(신형) + DB600(V3.0.8)
    - 포트5: 솔내시스템 + DB600(V3.0.8)

### 2.4 Python 스크립트 설정

```python
import socket
import threading
import time

# 설정
SERVER_IP = "255.255.255.255"  # 브로드캐스트 IP
START_PORT = 5001             # 시작 포트 번호
END_PORT = 5200               # 끝 포트 번호
MESSAGE = b"A" * 2000         # 2000바이트 크기의 데이터
REPEAT_COUNT = 20000          # 반복 횟수
INTERVAL = 0.001              # 전송 간격 (1ms)

def send_udp_to_port(port):
    """지정된 포트로 UDP 브로드캐스트 데이터 전송"""
    try:
        for repeat in range(REPEAT_COUNT):
            # UDP 소켓 생성
            sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

            # 브로드캐스트 옵션 활성화
            sock.setsockopt(socket.SOL_SOCKET, socket.SO_BROADCAST, 1)

            # 데이터 전송
            sock.sendto(MESSAGE, (SERVER_IP, port))
            print(f"Repeat {repeat + 1}/{REPEAT_COUNT}: Sent {len(MESSAGE)} bytes to {SERVER_IP}:{port}")

            # 소켓 닫기
            sock.close()

            # 전송 간격
            time.sleep(INTERVAL)

    except Exception as e:
        print(f"Error sending to port {port}: {e}")

  
def send_udp_to_all_ports():
    """모든 포트에 동시에 UDP 브로드캐스트 데이터 전송"""
    threads = []
    for port in range(START_PORT, END_PORT + 1):
        thread = threading.Thread(target=send_udp_to_port, args=(port,))
        threads.append(thread)
        thread.start()
        
    for thread in threads:
        thread.join()

if __name__ == "__main__":
    print("Starting UDP Multi-Port Broadcast Sender...")
    send_udp_to_all_ports()
    print("Finished.")
```

### 2.5 테스트 절차

1. **UDP 트래픽 생성**
    - 포트개수
    - 데이터 크기
    - 반복횟수
    - 전송간격
2. **TCP/IP 폰트 파일 전송**
    - 다빛 프로토콜 시뮬레이터를 통해 폰트파일 404928 byte 전송
    - 폰트그룹 0
        - ENG 08x16-DABIT(표준).fnt
        - KOR 16x16-DABIT(표준).fnt
        - USER 16x16-Special(표준).fnt
    - 폰트그룹 1
        - ENG 16x32-굴림체.fnt
        - KOR_UniCode 32x32_굴림.fnt
        - USER 32x32_굴림.fnt
3. **오류 및 안정성 확인**
    - 정상 동작 여부, 전송 실패 여부, 연결 오류 여부 기록.

---

## 3. 테스트 결과

### 3.1. TEST1: 컨트롤러별/버전별 비교 결과

| 테스트 대상         | UDP 포트 범위 | 데이터 크기 | 전송 간격 | 반복 횟수 | TCP/IP 파일 전송 성공 여부 | 비고       |
| -------------- | --------- | ------ | ----- | ----- | ------------------ | -------- |
| DB600 (V3.0.8) | 5001~5100 | 50byte | 20ms  | 10000 | 실패                 | 연결 오류 발생 |
| DB600 (V2.4.1) | 5001~5100 | 50byte | 20ms  | 10000 | 실패                 | 연결 오류 발생 |
| DB500 (V3.0.8) | 5001~5100 | 50byte | 20ms  | 10000 | 실패                 | 연결 오류 발생 |
| DB500 (V2.4.1) | 5001~5100 | 50byte | 20ms  | 10000 | 실패                 | 연결 오류 발생 |

### 3.2. TEST2. 컨버터 유무 비교 결과
| 테스트 대상                  | UDP 포트 범위 | 데이터 크기 | 전송 간격 | 반복 횟수 | TCP/IP 파일 전송 성공 여부 | 비고       |
| ----------------------- | --------- | ------ | ----- | ----- | ------------------ | -------- |
| DB600 (V3.0.8)          | 5001~5100 | 50byte | 20ms  | 10000 | 실패                 | 연결 오류 발생 |
| DB500 (V3.0.8)          | 5001~5100 | 50byte | 20ms  | 10000 | 실패                 | 연결 오류 발생 |
| DB300E + DB600 (V3.0.8) | 5001~5100 | 50byte | 5ms   | 10000 | 실패                 | 연결 오류 발생 |
| DB300E + DB500 (V3.0.8) | 5001~5100 | 50byte | 5ms   | 10000 | 실패                 | 연결 오류 발생 |
| DB300E + DB502 (V3.0.9) | 5001~5100 | 50byte | 5ms   | 10000 | 실패                 | 연결 오류 발생 |

### 3.3. TEST3: 업체별 비교 결과

| 테스트 대상                          | UDP 포트 범위 | 데이터 크기 | 전송 간격 | 반복 횟수 | TCP/IP 파일 전송 성공 여부 | 비고       |
| ------------------------------- | --------- | ------ | ----- | ----- | ------------------ | -------- |
| DB300E + DB600 (V3.0.8, V2.4.1) | 5001~5100 | 50byte | 5ms   | 10000 | 실패                 | 연결 오류 발생 |
| 위즈넷(구형) + DB600 (V3.0.8)        | 5001~5100 | 50byte | 10ms  | 10000 | 실패                 | 연결 오류 발생 |
| 위즈넷(신형) + DB600 (V3.0.8)        | 5001~5100 | 50byte | 1ms   | 10000 | 실패                 | 연결 오류 발생 |
| 솔내시스템 + DB600 (V3.0.8)          |           |        |       |       |                    |          |

## 4. 분석 및 비교

#### TEST1 (컨트롤러별/버전별 비교)

- 컨트롤러별 버전별은 비슷한 데이터 처리 능력을 보임
#### TEST2 (컨버터 유무 비교)

1. DB300E + DB600(V3.0.8)
    - 컨버터(DB300E)를 통해 DB600과 연결된 조합에서 UDP 전송 간격을 5ms로 줄였음에도 안정성이 더 나은 결과를 보임
    - 다만 고부하 환경에서는 연결 오류가 발생, 컨버터가 일부 트래픽을 보완하지만 한계는 있음
2. DB300E + DB500(V3.0.8)
    - DB500 단독보다 안정성을 개선했으나, 트래픽 부하가 증가할 경우 연결 오류가 빈번히 발생

#### TEST3 (업체별 비교)

1. 위즈넷(구형)
    - UDP 전송에서 패킷 손실과 연결 오류가 발생하여 안정성이 낮음
    - 트래픽 부하 처리 능력이 부족한 것으로 판단
2. 위즈넷(신형)
    - UDP 전송 간격을 1ms로 설정했을 때에도 높은 안정성을 보여줌
    - 구형 대비 개선된 네트워크 처리 성능을 확인

---

## 5. 한계 및 개선 방향

- **테스트의 한계**:
    - 회사와 집의 네트워크 환경 차이로 인해 결과값의 편차 발생 가능.
    - 절대적인 성능 비교보다는 같은 환경에서의 상대적인 성능 평가에 초점.
- **추후 개선 방향**:
    - 다양한 네트워크 환경에서 추가 테스트 수행.
    - TCP/IP 트래픽 증가에 따른 성능 변화 분석.
