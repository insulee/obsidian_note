---
share_link: https://share.note.sx/5mi2x7yq#Ro/0KXEsRMhdETuyon0uZVg3lfvARjra8XfNcl8RkI8
share_updated: 2025-04-10T15:57:34+09:00
---

---
### 고객의 주요 정보
#### 1. 고객정보
- 회사명: 베어로보틱스
- 담당자: 이홍우
- 연락처: 010-5141-7267
- 이메일: daniel.lee@bearrobotics.ai
#### 2. 컨트롤러 및 시스템 정보
- 컨트롤러 PCB 버전
	- DB502V10 / DB300EV04
- 펌웨어 버전
	- V2.1.0 / 확인불가
- LED 모듈 구성
	- 1단 18열

#### 3. 고장 혹은 문의에 대한 상세한 설명
- [문의영상](https://dabit.synology.me:55000/d/s/10FsWRbCX8m9wX8YeBosP6v0Wi3WrjFT/A2hKDRWNdoaIYeGbhNhoXfY5AkDrdRPm-8btg__sbsgs)
- 당사 제품에는 LED Matrix 세 섹션이 있고, 각 섹션에 TCP 패킷 하나를 순서대로 전송해 표시물을 변경합니다. 패킷을 먼저 보내는 순 대로 1번부터 3번 섹션이라 칭하겠습니다.   
	1. 로봇에서 애니메이션이 없는 문자열 출력 시
		- 1, 2, 3 번 모두 정상 출력
	2. 로봇에서 애니메이션이 있는 긴 문자열 출력 시 
		- 1 번 면에서 처음부터 정상적
		- 2,3 번 면에서 첫 출력이 비정상적, 이후 출력 정상적
	3. PC에서 `![000!]` 명령어로 문자열 삭제 시
		- 1 번 면에서 검은화면 정상적
		- 2, 3번 면에서 잔상과 같이 이전 메시지의 일부가 출력 됨
	4. PC에서 동일한 애니메이션이 있는 긴 문자열 출력 시
		- 1번 면에서 정상 출력
		- 2, 3 번 면에서 첫 출력이 비정상적(이전 출력 문자열의 일부가 표시 됨), 이후 출력 정상적
<dabit.py>
```
- if __name__ == "__main__":
    sock = create_tcp_socket()
    if sock:
        try:
            payloads = (
                "![000/P0000/D9900/C7/G0/T0/F0003/E0606/S2000/X0024/Y0004LISTO PARA RECOGER LA MESA!]",
                "![000/P0001/D9900/C7/G0/T0/F0003/E0606/S2000/X2448/Y0004LISTO PARA RECOGER LA MESA!]",
                "![000/P0002/D9900/C7/G0/T0/F0003/E0606/S2000/X4872/Y0004LISTO PARA RECOGER LA MESA!]",
            )
            for p in payloads:
                sock.send(p.encode())
                print(f"Sent: {p}")
                # time.sleep(1)

        except Exception as e:
            print(f"An error occurred while sending data: {e}")
        finally:
            sock.close()
            print("Socket closed")
```


---
### 동일한 현상 구현을 위한 테스트

- 기본정보
	- 컨트롤러: DB502V10 (V2.1.0)
	- 컨버터: DB300V04(V4.6.1)
	- LED 모듈 구성: 1단18열(베어로보틱스와 동일한 모듈)
	- 통신라인
		- 모듈 --(플랫케이블)-- DB502+DB300 --(LAN케이블)-- PC
	- 전원: 220V로 모듈과 컨트롤러에 공급
- 보내준 다음의 패킷을 자바에서 동일하게 구현
	`![000/P0000/D9900/C7/G0/T0/F0003/E0606/S2000/X0024/Y0004LISTO PARA RECOGER LA MESA!]
	`![000/P0001/D9900/C7/G0/T0/F0003/E0606/S2000/X2448/Y0004LISTO PARA RECOGER LA MESA!]`
	`![000/P0002/D9900/C7/G0/T0/F0003/E0606/S2000/X4872/Y0004LISTO PARA RECOGER LA MESA!]`

<dabit.java>
```
package dbps.dbps.controller;

import java.io.IOException;
import java.io.OutputStream;
import java.net.Socket;
import java.nio.charset.Charset;

public class dabit {
    public static void main(String[] args) throws IOException, InterruptedException {
        Socket socket = new Socket("10.10.127.10", 5000);
        socket.setSoTimeout(1000);

        OutputStream outputStream = socket.getOutputStream();
        //문구 패킷 전송
        String data = "![000/P0000/D9900/C7/G0/T0/F0003/E0606/S2000/X0024/Y0004LISTO PARA RECOGER LA MESA!]";
        outputStream.write(data.getBytes));
        outputStream.flush();
        data = "![000/P0001/D9900/C7/G0/T0/F0003/E0606/S2000/X2448/Y0004LISTO PARA RECOGER LA MESA!]";
        outputStream.write(data.getBytes));
        outputStream.flush();
        data = "![000/P0002/D9900/C7/G0/T0/F0003/E0606/S2000/X4872/Y0004LISTO PARA RECOGER LA MESA!]";
        outputStream.write(data.getBytes));
        outputStream.flush();

        Thread.sleep(20000);
//        //컨트롤러 리셋 패킷 전송
//        data = "![0041!]";
//        outputStream.write(data.getBytes));
//        outputStream.flush();

        //띄어쓰기 한 칸 포함한 검은화면 패킷 전송
        data = "![000/P0000/D9901/C7/G0/T0/F0003/E0606/S2000/X0024/Y0004 !]";
        outputStream.write(data.getBytes));
        outputStream.flush();
        data = "![000/P0001/D9901/C7/G0/T0/F0003/E0606/S2000/X2448/Y0004 !]";
        outputStream.write(data.getBytes));
        outputStream.flush();
        data = "![000/P0002/D9901/C7/G0/T0/F0003/E0606/S2000/X4872/Y0004 !]";
        outputStream.write(data.getBytes));
        outputStream.flush();
    }
}

```


#### 테스트 결과
- PC에서 애니메이션이 있는 긴 문자열 출력 시 정상 표출
	- ![[as_240925_베어1.mp4]]
- 또한, `![000!]` 패킷은 컨트롤러에서 지원하지 않는 패킷으로 사용하지 않을 것을 권장
- 문구를 삭제하고 싶다면 아래의 두 가지 패킷을 이용 
	1. 리셋명령
		- 패킷:  `![0041!]`
		- 영상
			- ![[as_240925_베어2.mp4]]
	2. 띄어쓰기 한칸만을 포함한 패킷 전송
		- 패킷: 
			- `![000/P0000/D9901/C7/G0/T0/F0003/E0606/S2000/X0024/Y0004 !]`
			- `![000/P0001/D9901/C7/G0/T0/F0003/E0606/S2000/X2448/Y0004 !]`
			- `![000/P0002/D9901/C7/G0/T0/F0003/E0606/S2000/X4872/Y0004 !]`
		- 영상
			- ![[as_240925_베어3.mp4]]
---
#### 추가문의

- 베어로보틱스 시나리오
	- 초기화
	- 영어 - READY TO BUS
	- ESPANOL - LISTO PARA RECOGER LA MESA
	- 다시 영어 - READY TO BUS

- `![000/P0000/D9901/F0003/E0606/S2000/X0024/Y0004/C7LISTO PARA RECOGER LA MESA!]
- `![000/P0001/D9901/F0003/E0606/S2000/X2448/Y0004/C7LISTO PARA RECOGER LA MESA!]`
- `![000/P0002/D9901/F0003/E0606/S2000/X4872/Y0004/C7LISTO PARA RECOGER LA MESA!]`


띄어쓰기 한칸만 전송
- `![000/P0000/D9901/F0003/E0100/S0002/X0024/Y0004/S0000/C7 !]`
- `![000/P0001/D9901/F0003/E0100/S0002/X2448/Y0004/S0000/C7 !]`
- `![000/P0002/D9901/F0003/E0100/S0002/X4872/Y0004/S0000/C7 !]`

- `![000/P0000/D9901/C7/G0/T0/F0003/E0606/S2000/X0024/Y0004 !]`
- `![000/P0001/D9901/C7/G0/T0/F0003/E0606/S2000/X2448/Y0004 !]`
- `![000/P0002/D9901/C7/G0/T0/F0003/E0606/S2000/X4872/Y0004 !]`

READY TO BUS 문구 표출
- `![000/P0000/D9901/F0003/E0101/S0000/X0000/Y0000/C7READY TO BUSREADY TO BUSREADY TO BUS!]`
- `![000/P0000/D9901/F0003/E0101/S0000/X0024/Y0004/C7READY TO BUS!]`
- `![000/P0001/D9901/F0003/E0101/S0000/X2448/Y0004/C7READY TO BUS!]`
- `![000/P0002/D9901/F0003/E0101/S0000/X4872/Y0004/C7READY TO BUS!]`


문제 - 섹션을 세개로 나눴을때 마지막 섹선의 표출 떨림



---
### 참고/관련 문서
- 
- 

%%
###### TAG : #21/A_S  #A_S 
%%
